# Лабораторная работа №2

**University:** [ITMO University](https://itmo.ru/ru/)  
**Faculty:** [FICT](https://fict.itmo.ru)  
**Course:** [Introduction in Web Technologies](https://itmo-ict-faculty.github.io/introduction-in-web-tech/)  
**Year:** 2025  
**Group:** U4225  
**Author:** Ангелина Дементьева  
**Lab:** Lab0  
**Date of create:** 29.09.2025  
**Date of finished:** 29.09.2025  

## Цель работы
Ознакомиться с принципами работы Cloud Run, развернуть контейнерный сервис, протестировать поведение различных ревизий, изучить логи и метрики, а также исследовать влияние изменения порта контейнера на работоспособность сервиса.

## Ход выполнения работы
##1. Создание сервиса Cloud Run

В консоли Google Cloud перешла в раздел Cloud Run.

Нажала Create Service.

Выбрала встроенный контейнерный образ:
gcr.io/cloudrun/hello

Установила минимальные ресурсы:

Memory: 256 MiB

CPU: 1

Включила Allow public access.

Создала сервис.

После развертывания открыла URL сервиса — появилась дефолтная страница “It’s running!”, что подтверждает успешный деплой.
![1](../lab1/photo_2025-11-18_20-16-24.jpg)
![1](../lab1/photo_2025-11-18_20-16-24.jpg)

##2. Анализ логов и метрик

В разделе Observability → Logs увидела:

входящие HTTP-запросы,

время обработки,

информацию о создании ревизий.

В разделе Metrics были изучены:

количество запросов,

время отклика,

автоскейлинг до 0 при отсутствии нагрузки.
![1](../lab1/photo_2025-11-18_20-16-24.jpg)

## 3. Изменение порта контейнера и тестирование поведения

Создала новую ревизию через Deploy new revision:

изменила Container port на 8090,

но сервис продолжил работать корректно и не выдал ошибку.

Причина:
Cloud Run использует переменную окружения PORT=8080, и образ gcr.io/cloudrun/hello всегда слушает именно этот порт, игнорируя порт, указанный вручную в настройках UI.
![1](../lab1/photo_2025-11-18_20-16-24.jpg)

##5. Переключение трафика между ревизиями

В открытом сервисе выбрала вкладку Revisions.

Создала две ревизии:

рабочую (порт 8080),

сломанную (порт 8090).

Через Manage traffic распределяла трафик между ними.
